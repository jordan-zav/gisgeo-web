---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("portfolio");
---

<BaseLayout title="Portfolio — GisGeo">
  <section class="hero">
    <h1>Portfolio</h1>
    <p>Selected technical projects, workflows and applied case studies.</p>
  </section>

  <section class="list">
    {projects
      .sort((a, b) => a.data.order - b.data.order)
      .map((project) => (
        <article class="card">
          <h2>{project.data.title}</h2>
          <p>{project.data.summary}</p>
          <a href={`/portfolio/${project.slug}`}>
            View project →
          </a>
        </article>
      ))}
  </section>

  <style>
    /* =====================
       HERO
    ====================== */
    .hero {
      text-align: center;
      padding: 4.5rem 2rem 3rem;
      max-width: 900px;
      margin: auto;
    }

    .hero h1 {
      margin-bottom: 0.5rem;
    }

    /* =====================
       LIST
    ====================== */
    .list {
      max-width: 900px;
      margin: auto;
      padding: 2rem;
      display: grid;
      gap: 2rem;
    }

    /* =====================
       CARD — BASE
    ====================== */
    .card {
      background: #ffffff;
      border-radius: 18px;
      padding: 2.4rem;
      box-shadow:
        0 18px 50px rgba(0, 0, 0, 0.12),
        0 4px 12px rgba(0, 0, 0, 0.06);
      transition:
        background 0.3s ease,
        color 0.3s ease,
        transform 0.25s ease,
        box-shadow 0.25s ease;
    }

    /* =====================
       CARD — DARK MODE (CLAVE)
       USAR :global()
    ====================== */
    :global([data-theme="dark"]) .card {
      background: #0f172a;
      color: #e5e7eb;
      box-shadow:
        0 22px 65px rgba(0, 0, 0, 0.7),
        0 8px 22px rgba(0, 0, 0, 0.5);
    }

    /* =====================
       CARD — HOVER
    ====================== */
    .card:hover {
      transform: translateY(-4px);
      box-shadow:
        0 26px 70px rgba(0, 0, 0, 0.18),
        0 8px 22px rgba(0, 0, 0, 0.12);
    }

    :global([data-theme="dark"]) .card:hover {
      box-shadow:
        0 30px 80px rgba(0, 0, 0, 0.8),
        0 10px 28px rgba(0, 0, 0, 0.6);
    }

    /* =====================
       TEXT
    ====================== */
    .card h2 {
      margin-top: 0;
      margin-bottom: 0.6rem;
    }

    .card p {
      opacity: 0.85;
      margin-bottom: 1.2rem;
    }

    /* =====================
       LINK
    ====================== */
    .card a {
      color: var(--green);
      text-decoration: none;
      font-weight: 500;
    }

    .card a:hover {
      text-decoration: underline;
    }
  </style>
</BaseLayout>
